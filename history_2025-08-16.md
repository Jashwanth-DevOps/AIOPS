git remote set-url origin git@github.com:Jashwanth-DevOps/AIOPS.git

    1  sudo apt update 
    2  sudo apt update && sudo apt upgrade -y
    3  sudo apt install net-tools
    4  curl -fsSL https://ollama.com/install.sh | sh 
    5  sudo vi /etc/systemd/system/ollama.service 
    6  sudo apt update
    7  sudo apt install vim -y
    8  sudo vi /etc/systemd/system/ollama.service 
    9  ollama list 
   10  sudo cat  /etc/systemd/system/ollama.service 
   11  sudo vi /etc/systemd/system/ollama.service 
   12  sudo systemctl daemon-reexec
   13  sudo systemctl daemon-reload 
   14  sudo systemctl enable ollama 
   15  sudo systemctl restart ollama
   16  sudo systemctl status  ollama
   17  netstat -nap |grep:11434
   18  netstat - nap |grep:11434
   19  sudo netstat -nap | grep 11434
   20  ollama pull llama3
   21  ollama list
   22  apt install net-tools
   23  docker -version 
   24  docker --version 
   25  docker run -d -p 3000:8080 -e OLLAMA_BASE_URL=http://$(hostname -I|awk '{print $1}'):11434 -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main
   26  sudo usermod -aG docker $USER
   27  docker run -d -p 3000:8080 -e OLLAMA_BASE_URL=http://$(hostname -I|awk '{print $1}'):11434 -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main
   28  sudo usermod -aG docker $USER
   29  docker ps 
   30  ls -lrth 
   31  cd infra/
   32  ls -l 
   33  cd VM_Instance/
   34  ls -lrth 
   35  vi main.tf 
   36  terraform plan 
   37  terraform init 
   38  terraform plan 
   39  terraform apply 
   40  vi main.tf 
   41  terraform plan 
   42  gcloud compute images list --project=ubuntu-os-cloud --no-standard-images
   43  cat main.tf 
   44  > main.tf 
   45  vi main.tf 
   46  rm main.tf 
   47  vi main.tf
   48  ls -l .main.tf.swp 
   49  rm .main.tf.swp 
   50  terraform plan 
   51  terrafrom apply 
   52  terraform apply 
   53  ls -l 
   54  cat terraform.tfstate
   55  ls -l 
   56  cd ..
   57  ls -lrth 
   58  mkdir VPC_Network
   59  ls -l 
   60  cd VPC_Network/
   61  ls -lrth 
   62  ls -l 
   63  vi main.tf
   64  terrafrom init 
   65  terrafom init 
   66  terraform init
   67  terraform plan 
   68  > main.tf 
   69  vi main.tf 
   70  terraform plan 
   71  vi main.tf 
   72  terraform init -upgrade
   73  terraform plan 
   74  terraform apply 
   75  gcloud compute networks list
   76  terraform destroy
   77  cd ..
   78  cd VM_Instance/
   79  terraform destroy
   80  cd ..
   81  cd GCS
   82  cd GCS_Bucket/
   83  terraform destroy
   84  ls -l 
   85  cd ..
   86  ls -l 
   87  ccd GCS_Bucket/
   88  cd GCS_Bucket/
   89  ls -l 
   90  terraform destroy
   91  terraform destroy -auto-approve 
   92  cd ~/infra/GCS_Bucket
   93  terraform init -upgrade
   94  terraform destroy
   95  gcloud storage buckets list --filter="name:aiops-gcs-bucket"
   96  gcloud compute networks list --filter="name:aiops-vpc"
   97  gcloud compute instances list --filter="name:terraform-vm"
   98  cd ..
   99  ls -l 
  100  cd aiops4352/
  101  ls -l 
  102  cat terraform-key.json 
  103  ls -lrth 
  104  pwd 
  105  mv terraform-key.json  /home/aiops4352/infra/
  106  cd infra/
  107  ls -lrth 
  108  cd ..
  109  ls -l 
  110  mv infra/ GCP_Infra_Setup
  111  ls -l 
  112  git 
  113  gi clone https://github.com/Jashwanth-DevOps/AIOPS.git 
  114  git  clone https://github.com/Jashwanth-DevOps/AIOPS.git 
  115  ls -lrth 
  116  cd AIOPS/
  117  ls -l 
  118  cd ..
  119  cd AIOPS/
  120  pwd 
  121  cd ..
  122  cp -rf GCP_Infra_Setup /home/aiops4352/AIOPS 
  123  ls -l 
  124  cd AIOPS/
  125  ls -lrth 
  126  history 
  127  ls -lrth 
  128  history > my_history.txt

=====================================

#Install vi (or vim)

sudo apt update
sudo apt install vim -y


#Command to check the netstat command

sudo apt update
sudo apt install net-tools -y


command: netstat -nap | grep 11434


#comamd to run teh docker comamd without sudo 

sudo usermod -aG docker $USER

restart the docker after executing this above command 


###Steps to set up GCP credentials for Terraform####

#1. Install Google Cloud CLI

sudo snap install google-cloud-cli --classic

#verify: gcloud version

#2. Authenticate with your Google account

gcloud auth login

#3. Set the project

gcloud config set project <PROJECT_ID>


####4. Create a service account for Terraform (recommended)

#Create a service account:

gcloud iam service-accounts create terraform \
  --description="Terraform service account" \
  --display-name="terraform"

#Grant it the required roles (example: full project admin):

gcloud projects add-iam-policy-binding <PROJECT_ID> \
  --member="serviceAccount:terraform@<PROJECT_ID>.iam.gserviceaccount.com" \
  --role="roles/editor"


#Generate and download a JSON key:

gcloud iam service-accounts keys create ~/terraform-key.json \
  --iam-account=terraform@<PROJECT_ID>.iam.gserviceaccount.com

#Point Terraform to the credentials 

provider "google" {
  credentials = file("~/terraform-key.json")
  project     = "<PROJECT_ID>"
  region      = "us-central1"
}


##Terraform commands##

terraform init
terraform plan
terraform apply


##command to check  service account exisit or not

gcloud iam service-accounts list --project citric-sprite-469211-u4


##Grant permissions again

Now re-run with the correct email:

gcloud projects add-iam-policy-binding citric-sprite-469211-u4 \
  --member="serviceAccount:terraform@citric-sprite-469211-u4.iam.gserviceaccount.com" \
  --role="roles/editor"


###🔧 Steps to create & download the JSON key

#Make sure the service account exists (replace with your project ID):

gcloud iam service-accounts list --project citric-sprite-469211-u4


#Create a key file (JSON) for this service account: 

gcloud iam service-accounts keys create ~/terraform-key.json \
  --iam-account=terraform@citric-sprite-469211-u4.iam.gserviceaccount.com \
  --project=citric-sprite-469211-u4


#This will save the key at: ~/terraform-key.json
 


####Use this key in Terraform#####

provider "google" {
  credentials = file("~/terraform-key.json")
  project     = "citric-sprite-469211-u4"
  region      = "us-central1"
}





###Next Steps: Configure Terraform####


terraform {
  required_providers {
    google = {
      source  = "hashicorp/google"
      version = "~> 5.0"
    }
  }
}

provider "google" {
  credentials = file("/home/aiops4352/terraform-key.json")
  project     = "citric-sprite-469211-u4"
  region      = "us-central1"
}



==================================================================================

###GCP  CLI Commands####

gcloud storage buckets list
 
gcloud container images list


#🔧 If you want only bucket names:  gcloud storage buckets list --format="value(name)"
 

🔧 1. List all Ubuntu images


gcloud compute images list --project=ubuntu-os-cloud --no-standard-images

#2. List all families (to see latest rolling images)

gcloud compute images list --project=ubuntu-os-cloud --no-standard-images --format="table(NAME, FAMILY)"


#🔧 3. Get latest image in a family (e.g., Ubuntu 20.04 LTS) 

gcloud compute images describe-from-family ubuntu-2004-lts --project=ubuntu-os-cloud


# VPC network list
 
gcloud compute networks list

gcloud compute networks subnets list


=========================================================================================================

#🔧 1. Generate SSH keypair

ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa


#🔧 2. Verify the key exists 

ls -l ~/.ssh/


#You should now see:


id_rsa
id_rsa.pub


============================================================================================================

##🔧 3. Update Terraform code 

metadata = {
  ssh-keys = "aiops4352:${file("~/.ssh/id_rsa.pub")}"
}


===============================

#Error trouble shooting:

I already locked 6.48.0 before, but your config says ~> 5.0.


│ Error: Inconsistent dependency lock file │ │ The following dependency selections recorded in the lock file are inconsistent with the current configuration: │ - provider registry.terraform.io/hashicorp/google: locked version selection 6.48.0 doesn't match the updated version constraints "~> 5.0" │ │ To update the locked dependency selections to match a changed configuration, run: │ terraform init -upgrade

Option 2: Force downgrade to v5

solution: terraform init -upgrade
 



==================================================
###Commands to delete the resources 

cd ~/infra/VM_Instance
terraform destroy -auto-approve

cd ~/infra/VPC_Network
terraform destroy -auto-approve

cd ~/infra/GCS_Bucket
terraform destroy -auto-approve
 
==================================================================


####Alternative (not recommended unless Terraform state is lost)######

#Delete VM: gcloud compute instances delete terraform-vm --zone=us-central1-a
 
#Delete VPC: gcloud compute networks delete aiops-vpc
 
#Delete GCS bucket: gcloud storage buckets delete gs://aiops-gcs-bucket
 


Note: ⚠️ If Terraform state (terraform.tfstate) got deleted accidentally

gcloud storage buckets delete gs://aiops-gcs-bucket


=========================================================================================================

####You want to verify whether the resources (GCS bucket, VPC, VM) were deleted after running terraform destroy.#####

🔹 1. Check if GCS bucket exists

	gcloud storage buckets list --filter="name:aiops-gcs-bucket"


🔹 2. Check if VPC exists

	gcloud compute networks list --filter="name:aiops-vpc"


🔹 3. Check if VM exists

	gcloud compute instances list --filter="name:terraform-vm"
 
==============================================================================================================================


##Save entire history to a file 

	history > my_history.txt


🔹 Save last N commands

	history | tail -n 50 > recent_history.txt



🔹 Save bash history from .bash_history file

	cp ~/.bash_history ~/bash_history_backup.txt




